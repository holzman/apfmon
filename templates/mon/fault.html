{% extends "mon/base.html" %}
{% load timesince_human %}

{% block content %}

<h2>Service view - entries with high fraction of jobs in FAULT state</h2>

<table class=text>
<tr>
<th title="Label name, unique to each factory">Label
<th title="Factory name">factory
<th title="Fraction of jobs flagged">% flagged
<th title="Fraction of jobs in FAULT state">% fault
<th title="Fraction of jobs in FAULT state">total job count
</tr>
{% for row in rows %}

<tr class="{% cycle odd,even %}">
  <td nowrap><a href="{% url atl.mon.views.label row.label.id %}">{{ row.label }}</a>
  <td>{{ row.label.fid }}
  <td>{{ row.flagfrac }}
  <td><a href="{% url atl.mon.views.jobs row.label.id 'FAULT' %}">{{ row.faultfrac }}</a>
  <td>{{ row.totjob }}
{% comment %}
  <td nowrap class={{ row.activity }}>{{ row.label.last_modified|timesince }} ago
</tr>
<tr class=even>
  <td></td>
  <td colspan=7 class=right>{{ row.label.msg }}
</tr>
{% endcomment %}
{% endfor %}
</table>

<h2>Service view - Panda queues with only one Factory</h2>
<table class=text>
<tr>
<th title="Panda queue">Panda queue
<th title="Factory count">Factory count
{% for solo in sololist %}
<tr class="{% cycle odd,even %}">
  <td nowrap><a href="{% url atl.mon.views.pandaq solo.pandaq__id %}">{{ solo.pandaq__name }}
  <td>{{ solo.n }}
{% endfor %}

</table>

{% endblock %}
